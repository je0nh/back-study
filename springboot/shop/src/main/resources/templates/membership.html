<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
          integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <link href="/main.css" rel="stylesheet">
</head>
<body>
<div th:replace="~{ nav.html::navbar }"></div>

<form id="sign-up">
  <input type="text" name="id" placeholder="아이디" required>
  <input type="password" name="pw" placeholder="비밀번호" required>
  <input type="email" name="email" placeholder="example@mail.com">
  <input type="text" name="username" placeholder="홍길동" required>
  <button type="submit">회원 가입</button>
</form>

<script>
  $(document).ready(function() {
    $('#sign-up').submit(function(event) {
      event.preventDefault();

      var formData = $(this).serialize(); 

      $.ajax({
        method: 'POST',
        url: '/signup',
        data: formData,
        success: function(result) {
          alert('회원가입 완료!');
          window.location.href = '/list'
        },
        error: function(err) {
          alert('에러가 발생했습니다. 입력 내용을 확인해 주세요.');
        }
      });
    });
  });
</script>
</body>
</html>
